<div id="translator">
	<div class="container">
		<div class="row">
			<div class="col-sm-10 col-sm-offset-1">
				<h1>Translator</h1>
				<div class="row">
					<div class="col-sm-6">
						<input type="text" class="translate-input form-control" placeholder="Enter text to translate" >
					</div>
					<div class="col-sm-3">
						<input type="text" class="target-language form-control" placeholder="Target language" >
					</div>
					<div class="col-sm-3">
						<a href="#" class="translate">Translate Text</a>
					</div>
				</div>
				<div class="translate-response">
					<h3>Detected Language</h3>
					<span style="margin-bottom: 1em; display: block;"></span>
					<h3>Translated Text</h3>
					<span style="margin-bottom: 1em; display: block;"></span>
					<h3>Translated Response</h3>
					<span></span>
				</div>
				<div class="targets">
					<h3>Example Language Codes</h3>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	
	var targetLanguages = {
  "languages" : [ {
    "language" : "af",
    "name" : "Afrikaans"
  }, {
    "language" : "ar",
    "name" : "Arabic"
  }, {
    "language" : "az",
    "name" : "Azerbaijani"
  }, {
    "language" : "ba",
    "name" : "Bashkir"
  }, {
    "language" : "be",
    "name" : "Belarusian"
  }, {
    "language" : "bg",
    "name" : "Bulgarian"
  }, {
    "language" : "bn",
    "name" : "Bengali"
  }, {
    "language" : "bs",
    "name" : "Bosnian"
  }, {
    "language" : "cs",
    "name" : "Czech"
  }, {
    "language" : "cv",
    "name" : "Chuvash"
  }, {
    "language" : "da",
    "name" : "Danish"
  }, {
    "language" : "de",
    "name" : "German"
  }, {
    "language" : "el",
    "name" : "Greek"
  }, {
    "language" : "en",
    "name" : "English"
  }, {
    "language" : "eo",
    "name" : "Esperanto"
  }, {
    "language" : "es",
    "name" : "Spanish"
  }, {
    "language" : "et",
    "name" : "Estonian"
  }, {
    "language" : "eu",
    "name" : "Basque"
  }, {
    "language" : "fa",
    "name" : "Persian"
  }, {
    "language" : "fi",
    "name" : "Finnish"
  }, {
    "language" : "fr",
    "name" : "French"
  }, {
    "language" : "gu",
    "name" : "Gujarati"
  }, {
    "language" : "he",
    "name" : "Hebrew"
  }, {
    "language" : "hi",
    "name" : "Hindi"
  }, {
    "language" : "ht",
    "name" : "Haitian"
  }, {
    "language" : "hu",
    "name" : "Hungarian"
  }, {
    "language" : "hy",
    "name" : "Armenian"
  }, {
    "language" : "id",
    "name" : "Indonesian"
  }, {
    "language" : "is",
    "name" : "Icelandic"
  }, {
    "language" : "it",
    "name" : "Italian"
  }, {
    "language" : "ja",
    "name" : "Japanese"
  }, {
    "language" : "ka",
    "name" : "Georgian"
  }, {
    "language" : "kk",
    "name" : "Kazakh"
  }, {
    "language" : "km",
    "name" : "Central Khmer"
  }, {
    "language" : "ko",
    "name" : "Korean"
  }, {
    "language" : "ku",
    "name" : "Kurdish"
  }, {
    "language" : "ky",
    "name" : "Kirghiz"
  }, {
    "language" : "lt",
    "name" : "Lithuanian"
  }, {
    "language" : "lv",
    "name" : "Latvian"
  }, {
    "language" : "ml",
    "name" : "Malayalam"
  }, {
    "language" : "mn",
    "name" : "Mongolian"
  }, {
    "language" : "nb",
    "name" : "Norwegian Bokmal"
  }, {
    "language" : "nl",
    "name" : "Dutch"
  }, {
    "language" : "nn",
    "name" : "Norwegian Nynorsk"
  }, {
    "language" : "pa",
    "name" : "Panjabi"
  }, {
    "language" : "pl",
    "name" : "Polish"
  }, {
    "language" : "ps",
    "name" : "Pushto"
  }, {
    "language" : "pt",
    "name" : "Portuguese"
  }, {
    "language" : "ro",
    "name" : "Romanian"
  }, {
    "language" : "ru",
    "name" : "Russian"
  }, {
    "language" : "sk",
    "name" : "Slovakian"
  }, {
    "language" : "so",
    "name" : "Somali"
  }, {
    "language" : "sq",
    "name" : "Albanian"
  }, {
    "language" : "sv",
    "name" : "Swedish"
  }, {
    "language" : "ta",
    "name" : "Tamil"
  }, {
    "language" : "te",
    "name" : "Telugu"
  }, {
    "language" : "tr",
    "name" : "Turkish"
  }, {
    "language" : "uk",
    "name" : "Ukrainian"
  }, {
    "language" : "ur",
    "name" : "Urdu"
  }, {
    "language" : "vi",
    "name" : "Vietnamese"
  }, {
    "language" : "zh",
    "name" : "Simplified Chinese"
  }, {
    "language" : "zh-TW",
    "name" : "Traditional Chinese"
  } ]
}


	///// append target languages for reference
	for (var i = targetLanguages.languages.length - 1; i >= 0; i--) {
		var el = targetLanguages.languages[i]
		$(".targets").append("<p>" + el.name + " = " + el.language + "</p>")
	}

	$("a.translate").on("click", function() {

		var text = $(".translate-input").val()
		var targetlang = $(".target-language").val()

	    $.get("/identifylanguage?text=" + text, function(data){

	        var d = data
	        var j = JSON.parse(d).languages[0].language

	        // console.log(d)
	        // console.log(j)

	        $(".translate-response span").first().append(j)

	    })

		$.get("/translate?text=" + text + "&targetlang=" + targetlang, function(data){

			var d = data

			console.log(JSON.parse(d))
			var j = JSON.parse(d).translations[0].translation

			$(".translate-response span").first().next().next().append(j)
			$(".translate-response span").last().append(d)
		})
	})

	// check language

</script>